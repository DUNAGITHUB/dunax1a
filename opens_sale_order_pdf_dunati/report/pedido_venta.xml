<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_saleorder_pedido_venta_opens">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <div class="header" style="font-family:Arial, Helvetica, sans-serif; padding-top:50px !important; border-bottom: 1px solid black;">
                    <div class="row text-center" >
                        <table class="table table-condensed" style="padding:0px; margin:0px;">
                            <tbody>
                                <tr>
                                    <td style="padding:0px !important; width:50%;">
                                        <div style="text-align:center; font-size:14px; padding-left:50px;">
                                            <p style="float:left; padding-top:40px;">
                                                <span><strong>DUNATI CHILE SPA</strong></span><br/>
                                                <span><strong>Venta de Sillas y Muebles de Oficina</strong></span><br/>
                                                <span><strong>76.515.462-6</strong></span><br/>
                                                <span><strong>Panamericana Norte 5151, Conchali</strong></span>
                                            </p>
                                        </div>
                                    </td>
                                    <td style="padding:0px !important; width:10%;">
                                        <div style="text-align:center; font-size:14px; padding-top:40px;">
                                            <table class="table" style="text-align:left; font-size:13px; float:right;">
                                                <tbody>
                                                    <tr>
                                                        <div>
                                                            <td style="padding:0px; margin:0px;" class="text-center"><strong>N° de NV:</strong></td>
                                                            <td style="padding:0px; margin:0px;" class="text-center"><span t-esc="o.name"/></td>
                                                        </div>
                                                    </tr>
                                                    <tr>
                                                        <div>
                                                            <td style="padding:0px; margin:0px;" class="text-center"><strong>Estado:</strong></td>
                                                            <td style="padding:0px; margin:0px;" class="text-center"><span t-field="o.state"/></td>
                                                        </div>
                                                    </tr>
                                                    <tr>
                                                        <div>
                                                            <td style="padding:0px; margin:0px;" class="text-center"><strong>Fecha</strong></td>
                                                            <td style="padding:0px; margin:0px;" class="text-center"><span t-esc="o.date_order" t-options='{"widget": "date"}'/></td>
                                                        </div>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <span style="font-size:15px; padding-top:10px;"><strong>Nota de Venta</strong></span>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <t t-call="web.external_layout">
                    <div class="page" style="font-family:Arial, Helvetica, sans-serif;">
                        <div class="row" style="padding-top:40px;">
                            <table class="table table-condensed" >
                                <tbody>
                                    <tr>
                                        <td style="padding:0px !important;">
                                            <div style="font-size:13px;">
                                                <p style="float:left;">
                                                    <span></span><br/>
                                                    <span></span><br/>
                                                    <span></span><br/>
                                                    <span><strong>Nombre:</strong></span> <span t-field="o.partner_id.name"/><br/>
                                                    <span><strong>Dirección:</strong></span> <span t-field="o.partner_id.street"/><br/>
                                                    <span><strong>Ciudad:</strong></span> <span t-field="o.partner_id.city"/><br/>
                                                    <span><strong>Zona:</strong></span> <span t-field="o.partner_id.country_id"/><br/>
                                                    <span><strong>Teléfono:</strong></span> <span t-field="o.partner_id.phone"/><br/>
                                                    <span><strong>Glosa:</strong></span> <span t-field="o.name"/>
                                                </p>
                                            </div>
                                        </td>
                                        <td style="padding:0px !important; width:30%;">
                                            <div style="font-size:13px; padding-left:40%;">
                                                <table class="table" >
                                                    <tbody>
                                                        <tr>
                                                            <div>
                                                                <td style="padding:0px; margin:0px;" class="text-right">
                                                                    <strong>N° OC:</strong>
                                                                </td>
                                                                <td style="padding:0px; margin:0px;" class="text-left"></td>
                                                            </div>
                                                        </tr>
                                                        <tr>
                                                            <div>
                                                                <td style="padding:0px; margin:0px;" class="text-right">
                                                                    <strong>CC:</strong>
                                                                </td>
                                                                <td style="padding:0px; margin:0px;" class="text-left"></td>
                                                            </div>
                                                        </tr>
                                                        <tr>
                                                            <div>
                                                                <td style="padding:0px; margin:0px;" class="text-right">
                                                                    <strong>Moneda:</strong>
                                                                </td>
                                                                <td style="padding:0px; margin:0px;" class="text-left">
                                                                    <span t-field="o.currency_id.symbol"/>
                                                                </td>
                                                            </div>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <p style="float:left; margin-top:-15px;">
                                                    <!--<span style="float:right;"><strong>N° OC:</strong> <span t-field="o.name"/></span><br/>
                                                    <span style="float:right;"><strong>CC:</strong></span><br/>
                                                    <span style="float:right;"><strong>Moneda:</strong> <span t-field="o.currency_id.symbol"/></span>-->
                                                    <span><strong>R.U.T.:</strong></span> <span t-field="o.partner_id.vat"/><br/>
                                                    <span><strong>Comuna:</strong></span> <span t-field="o.partner_id.state_id"/><br/>
                                                    <span><strong>Fax:</strong></span><br/>
                                                    <span><strong>Vendedor:</strong></span> <span t-field="o.user_id"/>
                                                </p>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <table class="table" style="text-align:left; font-size:13px; border: 1px solid black;">
                            <thead>
                                <tr>
                                    <th style="border: 1px solid black; background: #A9A9A9; padding:0px; margin:0px;" class="text-center">Código</th>
                                    <th style="border: 1px solid black; background: #A9A9A9; padding:0px; margin:0px;" class="text-center">Cant.</th>
                                    <th style="border: 1px solid black; background: #A9A9A9; padding:0px; margin:0px;" class="text-center">U. Med.</th>
                                    <th style="border: 1px solid black; background: #A9A9A9; padding:0px; margin:0px;" class="text-center">Descripción</th>
                                    <th style="border: 1px solid black; background: #A9A9A9; padding:0px; margin:0px;" class="text-center">P. Unit.</th>
                                    <th style="border: 1px solid black; background: #A9A9A9; padding:0px; margin:0px;" class="text-center">Descto.</th>
                                    <th style="border: 1px solid black; background: #A9A9A9; padding:0px; margin:0px;" class="text-center">Valor Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="o.order_line" t-as="line" style="border: 1px solid black;">
                                    <div>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center"><span t-field="line.product_id.default_code"/></td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center"><span t-field="line.product_qty"/></td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center"><span t-field="line.product_uom.name"/></td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center"><span t-field="line.name"/></td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-right" ><span t-esc="'{0:,.0f}'.format(int(line.price_unit)).replace(',','.')"/></td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-right" ><span t-esc="line.calculate_discount(line.price_unit, line.discount)"/></td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px; background: #A9A9A9" class="text-right" >
                                            <span t-esc="'{0:,.0f}'.format(int(line.price_subtotal)).replace(',','.')"/>
                                        </td>
                                    </div>
                                    <tr t-if="line.components">
                                        <tr t-foreach="line.components.bom_line_ids" t-as="com">
                                            <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center"><span t-field="com.product_id.default_code"/></td>
                                            <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center"></td>
                                            <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center"></td>
                                            <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center"><span t-field="com.product_qty"/> - <span t-field="com.product_uom_id"/> - <span t-field="com.product_id.name"/></td>
                                            <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center"></td>
                                            <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center"></td>
                                            <td style="border: 1px solid black; padding:0px; margin:0px; background: #A9A9A9" class="text-center"></td>
                                        </tr>
                                    </tr>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="footer" style="font-family:Arial, Helvetica, sans-serif;">
                        <table class="table" style="text-align:left; font-size:13px; border: 1px solid black; width: 20%; float:right; height:40px;">
                            <tbody>
                                <tr style="border: 1px solid black;">
                                    <div>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center">Neto</td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px; background: #A9A9A9;" class="text-right"><span t-esc="'{0:,.0f}'.format(int(o.amount_untaxed)).replace(',','.')"/></td>
                                    </div>
                                </tr>
                                <tr style="border: 1px solid black;">
                                    <div>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center">Descto.</td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px; background: #A9A9A9;" class="text-right"><span t-esc="o.calculate_global_discount(o.amount_untaxed)"/></td>
                                    </div>
                                </tr>
                                <tr style="border: 1px solid black;">
                                    <div>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center">SubTotal</td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px; background: #A9A9A9;" class="text-right"><span t-esc="'{0:,.0f}'.format(int(o.amount_untaxed)).replace(',','.')"/></td>
                                    </div>
                                </tr>
                                <tr style="border: 1px solid black;">
                                    <div>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center">Iva 19%</td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px; background: #A9A9A9;" class="text-right"><span t-esc="'{0:,.0f}'.format(int(o.amount_tax)).replace(',','.')"/></td>
                                    </div>
                                </tr>
                                <tr style="border: 1px solid black;">
                                    <div>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center"></td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px; background: #A9A9A9;" class="text-center"></td>
                                    </div>
                                </tr>
                                <tr style="border: 1px solid black;">
                                    <div>
                                        <td style="border: 1px solid black; padding:0px; margin:0px;" class="text-center">Total</td>
                                        <td style="border: 1px solid black; padding:0px; margin:0px; background: #A9A9A9;" class="text-right"><span t-esc="'{0:,.0f}'.format(int(o.amount_total)).replace(',','.')"/></td>
                                    </div>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table" style="text-align:left; font-size:13px;width: 80%; float:left; height:40px; margin-top:80px;">
                            <tbody>
                                <tr style="padding:0px; margin:0px;">
                                    <td style="float:right !important; padding:0px; margin:0px; margin-right:20px !important;">
                                        <span>N° de Página:</span>
                                        &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                                        &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                                        &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                                        &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                                        &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                                        <span class="page"/>
                                        &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>
    
    <record id="paperformat_sale_orders_opens_nota" model="report.paperformat">
        <field name="name">Nota de Ventas</field>
        <field name="default" eval="True"/>
        <field name="format">Letter</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">15</field>
        <field name="margin_bottom">40</field>
        <field name="margin_left">10</field>
        <field name="margin_right">10</field>
        <field name="header_line" eval="True"/>
        <field name="header_spacing">25</field>
        <field name="dpi">90</field>
    </record>

    <record id="action_report_saleorder_opens" model="ir.actions.report">
        <field name="name">Nota de Venta</field>
        <field name="model">sale.order</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">opens_sale_order_pdf_dunati.report_saleorder_pedido_venta_opens</field>
        <field name="print_report_name">(object.state in ('draft', 'sent') and 'Quotation - %s' % (object.name)) or 'Order - %s' % (object.name)</field>
        <field name="paperformat_id" ref="paperformat_sale_orders_opens_nota" />
        <field name="binding_model_id" ref="sale.model_sale_order"/>
        <field name="binding_type">report</field>
    </record>
</odoo>
